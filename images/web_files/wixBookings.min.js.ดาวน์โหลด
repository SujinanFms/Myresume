function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}define("wixBookings/common/dataProvider",["tpa","constants","addPanelDataConsts"],function(e,n,t){"use strict";var i="13d21c63-b5ec-5912-8397-c3a5ddb27a97";function o(){return i}return{getAppDefID:o,superAppPanelName:n.SUPER_APPS.BOOKINGS_PANEL_NAME,superAppButtonLabel:"SiteApp_WixBookings_Button_Hover_Caption",superAppPanelClassName:"wix-bookings-panel",superAppSymbolName:"leftBarWixBookingsPanel",getAddElementCategoryId:function(){return t.CATEGORIES_ID.BOOKINGS},superAppId:"wixBookings",hasPremium:function(){return e.superApps.isPremium(o())}}}),define("wixBookings/common/sitePrefsService",["lodash"],function(t){"use strict";var i=["business","photography","design","events","beauty-wellness","other","all",null],e=["business","photography","beauty-wellness"],n={createService:"create-service",editService:"edit-service",workingHours:"working-hours",email:"email",payment:"payment",done:"done",undefined:"undefined"},o="",s="";function a(e){return o=e.payload.fields[0].value}function p(e){return fetch("//editor.wix.com/_api/wix-bi-profile-webapp/siteprofile/"+e+"?fields=category&accept=json",{credentials:"include"}).then(function(e){return e.json()})}function r(e){return n=a(e),t.includes(i,n)?Promise.resolve():Promise.reject();var n}function l(){return o}function g(){return s?s.fromTemplate&&0<s.numOfOfferings&&!s.modifiedOffering?n.editService:0===s.numOfOfferings?n.createService:s.reviewedWorkingHours?s.reviewedEmail?s.hasPayments?n.done:n.payment:n.email:n.workingHours:n.undefined}function u(){return g()===n.createService}function d(){return g()===n.editService}return{ifPostRegRelevant:function(e){return p(e).then(r)},getPostReg:l,setPostReg:function(e){return p(e).then(a)},setBookingsSetupStatus:function(e){return fetch("/_api/bookings/owner/business/setup",{headers:{"x-wix-scheduler-instance":e}}).then(function(e){return e.json()}).then(function(e){s=e})},getBookingsSetupStep:g,isRelevantPostRegForExpand:function(){return t.includes(e,l())},isServiceNew:function(){return u()||d()},SETUP_STEPS:n,BOOKINGS_BO_PAGES:{offeringList:"scheduler/owner/offerings",calendar:"scheduler/owner/calendar",newForm:"scheduler/owner/offerings/wizard",settings:"settings",availability:"scheduler/owner/bookings-options/calendar-settings",email:"settings-email",payment:"payments"},createServiceStep:u,editServiceStep:d,ignorePaymentStep:function(){return s&&s.ignorePaymentStep},setIgnorePaymentStep:function(){s.ignorePaymentStep=!0},setIgnorePayment:function(e,n){return fetch("/_api/bookings/owner/business/setup",{headers:{"x-wix-scheduler-instance":e,"content-type":"application/json; charset=utf-8"},method:"PATCH",body:JSON.stringify({ignorePaymentStep:n})}).then(function(e){return e.status})}}}),define("wixBookings/common/bi/wixBookingsEvents",[],function(){"use strict";var n={TABS_CLICK:{evid:204,src:38,endpoint:"editor",fields:{app_id:"string",panel:"string"}},MANAGE_PANEL_BUTTON_CLICK:{evid:205,src:38,endpoint:"editor",fields:{app_id:"string",button_name:"string"}},LEARN_MORE_CLICK:{evid:209,src:38,endpoint:"editor",fields:{app_id:"string",category:"string"}},UPGRADE_POPUP_CLICK:{evid:156,src:16,endpoint:"wixboost-users",fields:{biToken:"string",businessId:"string",referral_info:"string"}},BOOKINGS_PANEL_OPENED:{evid:181,src:16,endpoint:"wixboost-users",fields:{state:"string",post_reg:"string"}},BOOKINGS_GET_STARTED:{evid:182,src:16,endpoint:"wixboost-users",fields:{post_reg:"string",is_bookings_provisioned:"boolean"}},BOOKINGS_INTERNAL_OPEN_BO:{evid:299,src:16,endpoint:"wixboost-users",fields:{biToken:"string",businessId:"string",post_reg:"string",button_name:"string"}},BOOKINGS_CREATE_NEW_SERVICE:{evid:310,src:16,endpoint:"wixboost-users",fields:{biToken:"string",businessId:"string",post_reg:"string",is_new:"boolean"}},BOOKINGS_TESTS_EXPOSURE:{evid:333,src:16,endpoint:"wixboost-users",fields:{post_reg:"string",testName:"string",triggerName:"string",is_eligible:"boolean"}}};return{wixBookingsEvents:n,registerEvents:function(e){e.dsActions.bi.register("components","event",n)}}}),define("wixBookings/common/bi/wixBookingsBi",["wixBookings/common/bi/wixBookingsEvents"],function(e){"use strict";return{events:e.wixBookingsEvents,registerEvents:e.registerEvents}}),define("wixBookings/common/editorActionsService",["util","tpa","superAppMenuInfra","helpIds","experiment","wixBookings/common/dataProvider","wixBookings/common/sitePrefsService","constants","wixBookings/common/bi/wixBookingsBi","stateManagement"],function(p,o,n,t,r,s,l,g,u,d){"use strict";var i=s.superAppId,c=s.superAppPanelName,a=s.superAppButtonLabel,m=s.superAppButtonLabel,_=s.superAppSymbolName,S=s.superAppPanelClassName,B=void 0;function k(){return B.dsRead.tpa.app.isInstalled(s.getAppDefID())}function f(){var e=!B.dsRead.generalInfo.isFirstSave(),n=w().demoMode;return e&&B.dsRead.tpa.app.isAppProvisionedOnServer(s.getAppDefID())&&!n}function A(){N()&&l.setBookingsSetupStatus(h(w())),o.superApps.refreshAppCompsForAppDefId(s.getAppDefID())}function P(e,n,t,i){o.superApps.addWidget(e,n,t,{presetId:i,origin:o.constants.BI.type.ADD_WIDGET}),B.panelManager.closePanelByName(g.SUPER_APPS.BOOKINGS_PANEL_NAME)}function x(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"editorLoad",n=B.dsRead.generalInfo.isSitePublished(),t=!1;if(r.isOpen("se_wixBooking_6thButtonImprovementsFT")&&l.isRelevantPostRegForExpand()&&!B.dsRead.tpa.app.isInstalled("1380b703-ce81-ff05-f115-39571d94dfcd")&&!n){var i=B.store.getState(),o=d.editorPlugins.userPreferences.selectors.getSiteUserPreferences(c+g.LEFT_BAR.WAS_BUTTON_CLICKED_KEY)(i),s=d.editorPlugins.leftBar.selectors.isCollapsed(i);if(t=M()&&(!k()||!o),s&&!o){var a=l.getPostReg();try{B.bi.event(u.events.BOOKINGS_TESTS_EXPOSURE,{post_reg:a,testName:"6thButtonExpandPanelButton",triggerName:e,is_eligible:M()})}catch(e){p.ravenUtils.captureError(e,{tags:{bookings:!0,exposureBiEvents:!0}})}}}return t}function e(){var e=x();n.button.registerButton(B,i,k(),c,a,m,S,_,!1,_defineProperty({},i,e))}function b(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"manage",t=2<arguments.length&&void 0!==arguments[2]&&arguments[2];T(null,e);var i=v(),o=y();t||(B.bi.event(u.events.MANAGE_PANEL_BUTTON_CLICK,{app_id:s.getAppDefID(),button_name:n}),B.bi.event(u.events.BOOKINGS_INTERNAL_OPEN_BO,{biToken:i,businessId:o,button_name:n,post_reg:l.getPostReg()}))}function T(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";(e=e||{to:"dd"}).onClose=A,n&&(e.state=n);var t={type:o.constants.BI.type.APP_MANAGE_BUTTON};return e.origin="editor_6th_button",o.superApps.openDashboardUrl(s.getAppDefID(),e,t)}function E(){return l.ifPostRegRelevant(I())}function I(){return B.dsRead.generalInfo.getMetaSiteId()}function v(){return e="biToken",(n=w(),t=n&&n.instance.split(".")[1],t&&JSON.parse(window.atob(t)))[e];var e,n,t}function w(){return B.dsRead.tpa.app.getDataByAppDefId(s.getAppDefID())}function y(){return w().instanceId}function h(e){return e&&e.instance}function N(){return r.isOpen("se_wixBooking_6thButtonImprovementsFT")&&r.isOpen("se_wixBooking_improveManagerPanel")}function M(){return r.isOpen("se_wixBooking_6thButtonImprovementsFT")&&r.isOpen("se_wixBooking_expandPanelButton")}return{init:function(e){B=e},isAppInstalled:k,isAppProvisioned:f,addAppToSite:function(){o.superApps.addApp(s.getAppDefID(),{callback:function(n){n.page&&B.pages.navigateTo(n.page.id,function(){var e=o.superApps.getSectionRefByPageId(n.page.id);B.selection.selectComponentByCompRef(e)})},origin:o.constants.BI.type.ADD_APP_APP_BUTTON})},onWidgetDrop:function(e,n){e.width=n.structure.layout.width,e.height=n.structure.layout.height,P(s.getAppDefID(),n.structure.data.widgetId,e,n.itemId)},onWidgetClick:function(e,n,t,i){P(s.getAppDefID(),e.data.widgetId,void 0,i)},onAppInstalled:function(){n.button.onAppInstalled(B,i,c,a,S,_)},openBackOfficeInEditor:T,manageBookings:b,goToContainingPage:function(){var e=s.getAppDefID(),n=B.dsRead.tpa.app.getFirstAppCompPageId(e);n&&B.pages.navigateTo(n.pageId)},registerButtonIfRequired:function(){N()?k()?f()?l.setPostReg(I()).then(function(){return l.setBookingsSetupStatus(h(w()))}).then(e):l.setPostReg(I()).then(e):E().then(e).catch(function(){}):k()?l.setPostReg(I()).then(e):E().then(e).catch(function(){})},openHelp:function(){var e={origin:g.BI.HELP.ORIGIN.LEFTBAR,panel_name:c,learn_more:!0};B.panelManager.openHelpCenter(t.WIX_BOOKINGS,null,e)},onAppDeleted:function(){n.button.unRegisterButton(B,c)},handelUpgrade:function(){var e=s.getAppDefID(),n=v(),t=y();B.bi.event(u.events.UPGRADE_POPUP_CLICK,{biToken:n,businessId:t,referral_info:"editor_button"}),o.superApps.upgrade(e,!0,"edhtml_TOP_PANEL")},getBookingsBiToken:v,getBookingsInstanceId:y,sendBookingsPanelOpenedBI:function(){var e=void 0;e=k()?f()?l.createServiceStep()||l.editServiceStep()?"post_provision_before_save_service":"manage":"pre_provision":"marketing_state_add_now";var n=l.getPostReg();try{B.bi.event(u.events.BOOKINGS_PANEL_OPENED,{state:e,post_reg:n})}catch(e){p.ravenUtils.captureError(e,{tags:{bookingsPanelOpenBI:!0}})}},sendBookingsGetStartedBI:function(){try{B.bi.event(u.events.BOOKINGS_GET_STARTED,{post_reg:l.getPostReg(),is_bookings_provisioned:k()&&f()})}catch(e){p.ravenUtils.captureError(e,{tags:{bookingsGetStartedBI:!0}})}},sendBookingsCreateNewServiceBI:function(){var e=v(),n=y();try{B.bi.event(u.events.BOOKINGS_CREATE_NEW_SERVICE,{businessId:n,biToken:e,post_reg:l.getPostReg(),is_new:l.isServiceNew()})}catch(e){p.ravenUtils.captureError(e,{tags:{bookingsCreateNewServiceBI:!0}})}},isMarketingStateContentByPostRegEnabled:function(){return N()&&r.isOpen("se_wixBooking_marketingStateContentByPostReg")},isImproveManagerPanelEnabled:N,shouldExpandButton:x,isExapndPanelButtonEnabled:M,setIgnorePayment:function(e){return l.setIgnorePayment(h(w()),e)},manuallyManageBookings:function(){b(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",1<arguments.length&&void 0!==arguments[1]?arguments[1]:"manage",!0)}}}),define("wixBookings/appMenu/panels/firstTimeTour/promotionalFlow/promotionalStep1.rt",["react","lodash","superAppMenuInfra","wixBookings/common/dataProvider"],function(e,n,t,i){"use strict";return function(){return e.createElement(t.firstTimeTourPanels.installAppSlide,n.assign({},{installApp:this.installApp,nextSlide:this.openBackOffice,origin:"promotionalPanel",appWasManuallyInstalled:this.props.appWasManuallyInstalled,superAppPanelName:i.superAppPanelName,superAppButtonLabel:i.superAppButtonLabel,superAppPanelClassName:i.superAppPanelClassName,superAppSymbolName:i.superAppSymbolName,title:this.getTitle(),subTitle:this.getSubTitle(),pros:this.getPros(),nextButtonLabel:this.getButtonLabel(),openAppMarketLabel:"SiteApp_Blog_PromotionalFTUE_Step1_SeeInAppMarket_LinkCaption",openAppMarket:this.openHelp,loadingLabel:"SiteApp_WixBookings_PromotionalFTUE_Step2_Loader_Caption",sliderImages:this.getSliderImages(),installImage:"bookingsInstallBtnPromotional"},this.filteredProps()))}}),define("wixBookings/appMenu/panels/firstTimeTour/promotionalFlow/promotionalStep1",["create-react-class","util","wixBookings/common/editorActionsService","wixBookings/common/sitePrefsService","wixBookings/appMenu/panels/firstTimeTour/promotionalFlow/promotionalStep1.rt","prop-types"],function(e,n,t,i,o,s){"use strict";return e({displayName:"promotionalStep1Bookings",propTypes:{nextSlide:s.func},mixins:[n.propTypesFilterMixin],componentDidMount:function(){t.isImproveManagerPanelEnabled()&&t.isAppInstalled()&&!t.isAppProvisioned()&&t.goToContainingPage(),this.props.nextSlide&&this.props.appWasManuallyInstalled&&(this.props.nextSlide(),t.manuallyManageBookings(i.BOOKINGS_BO_PAGES.offeringList))},isAppInstalled:function(){return t.isImproveManagerPanelEnabled()&&t.isAppInstalled()},installApp:function(e){t.isImproveManagerPanelEnabled()&&t.isAppInstalled()||t.addAppToSite(),t.sendBookingsGetStartedBI(),e()},openBackOffice:function(){t.isImproveManagerPanelEnabled()&&(t.manuallyManageBookings(i.BOOKINGS_BO_PAGES.offeringList),this.props.nextSlide())},openHelp:function(){t.openHelp()},getSliderImages:function(){return[n.media.getMediaUrl("wixBookings/appMenuPanel/gallery/bookingsGallery01.png"),n.media.getMediaUrl("wixBookings/appMenuPanel/gallery/bookingsGallery02.png"),n.media.getMediaUrl("wixBookings/appMenuPanel/gallery/bookingsGallery03.png")]},getButtonLabel:function(){return this.isAppInstalled()?"SiteApp_WixBookings_TemplateFTUE_Step1_NextButton_Caption":"SiteApp_WixBookings_PromotionalFTUE_Step1_NextButton_Caption"},getTitle:function(){return t.isImproveManagerPanelEnabled()?"SiteApp_WixBookings_NewPromotionalFTUE_Step1_Title":"SiteApp_WixBookings_PromotionalFTUE_Step1_Title"},getSubTitle:function(){return t.isImproveManagerPanelEnabled()?"SiteApp_WixBookings_NewPromotionalFTUE_Step1_SubTitle":"SiteApp_WixBookings_PromotionalFTUE_Step1_SubTitle"},getPros:function(){return t.isImproveManagerPanelEnabled()?["SiteApp_WixBookings_NewPromotionalFTUE_Step1_Bullet1","SiteApp_WixBookings_NewPromotionalFTUE_Step1_Bullet2","SiteApp_WixBookings_NewPromotionalFTUE_Step1_Bullet3"]:["SiteApp_WixBookings_PromotionalFTUE_Step1_Bullet1","SiteApp_WixBookings_PromotionalFTUE_Step1_Bullet2","SiteApp_WixBookings_PromotionalFTUE_Step1_Bullet3"]},render:o})}),define("wixBookings/appMenu/panels/firstTimeTour/templateFlow/templateStep1.rt",["react","lodash","superAppMenuInfra"],function(e,n,t){"use strict";return function(){return e.createElement(t.firstTimeTourPanels.getStartedSlide,n.assign({},{nextSlide:this.openBackOffice,superApp:this.props.superApp,appWasManuallyInstalled:this.props.appWasManuallyInstalled,title:"SiteApp_WixBookings_TemplateFTUE_Step1_Title",subTitle:"SiteApp_WixBookings_TemplateFTUE_Step1_SubTitle",pros:[],nextButtonLabel:"SiteApp_WixBookings_TemplateFTUE_Step1_NextButton_Caption",mainImage:"bookingsManager"},this.filteredProps()))}}),define("wixBookings/appMenu/panels/firstTimeTour/templateFlow/templateStep1",["create-react-class","prop-types","lodash","util","wixBookings/common/editorActionsService","wixBookings/appMenu/panels/firstTimeTour/templateFlow/templateStep1.rt"],function(e,n,t,i,o,s){"use strict";return e({displayName:"templateStep1Bookings",propTypes:{nextSlide:n.func},mixins:[i.propTypesFilterMixin],componentDidMount:function(){o.isAppProvisioned()?this.props.nextSlide():(o.goToContainingPage(),o.sendBookingsGetStartedBI())},openBackOffice:function(){o.openBackOfficeInEditor(),this.props.nextSlide()},render:s})}),define("wixBookings/appMenu/panels/firstTimeTour/beautyWellnessFlow/beautyWellnessStep1.rt",["react","lodash","superAppMenuInfra","wixBookings/common/dataProvider"],function(e,n,t,i){"use strict";return function(){return e.createElement(t.firstTimeTourPanels.installAppSlide,n.assign({},{installApp:this.installApp,nextSlide:this.openBackOffice,origin:"beautyWellnessPanel",appWasManuallyInstalled:this.props.appWasManuallyInstalled,superAppPanelName:i.superAppPanelName,superAppButtonLabel:i.superAppButtonLabel,superAppPanelClassName:i.superAppPanelClassName,superAppSymbolName:i.superAppSymbolName,title:"SiteApp_WixBookings_BeautyWellnessFTUE_Step1_Title",subTitle:"SiteApp_WixBookings_BeautyWellnessFTUE_Step1_SubTitle",pros:["SiteApp_WixBookings_BeautyWellnessFTUE_Step1_Bullet1","SiteApp_WixBookings_BeautyWellnessFTUE_Step1_Bullet2","SiteApp_WixBookings_BeautyWellnessFTUE_Step1_Bullet3"],nextButtonLabel:this.getButtonLabel(),openAppMarketLabel:"SiteApp_Blog_PromotionalFTUE_Step1_SeeInAppMarket_LinkCaption",openAppMarket:this.openHelp,loadingLabel:"SiteApp_WixBookings_PromotionalFTUE_Step2_Loader_Caption",sliderImages:this.getSliderImages(),installImage:"bookingsInstallBtnPromotional"},this.filteredProps()))}}),define("wixBookings/appMenu/panels/firstTimeTour/beautyWellnessFlow/beautyWellnessStep1",["create-react-class","util","wixBookings/common/editorActionsService","wixBookings/common/sitePrefsService","wixBookings/appMenu/panels/firstTimeTour/beautyWellnessFlow/beautyWellnessStep1.rt","prop-types"],function(e,n,t,i,o,s){"use strict";return e({displayName:"beautyWellnessStep1Bookings",propTypes:{nextSlide:s.func},mixins:[n.propTypesFilterMixin],componentDidMount:function(){t.isAppInstalled()&&!t.isAppProvisioned()&&t.goToContainingPage(),this.props.nextSlide&&this.props.appWasManuallyInstalled&&(this.props.nextSlide(),t.manuallyManageBookings(i.BOOKINGS_BO_PAGES.offeringList))},isAppInstalled:function(){return t.isAppInstalled()},installApp:function(e){t.isAppInstalled()||t.addAppToSite(),t.sendBookingsGetStartedBI(),e()},openBackOffice:function(){t.manuallyManageBookings(i.BOOKINGS_BO_PAGES.offeringList),this.props.nextSlide()},openHelp:function(){t.openHelp()},getSliderImages:function(){return[n.media.getMediaUrl("wixBookings/appMenuPanel/gallery/bookingsGallery01.png"),n.media.getMediaUrl("wixBookings/appMenuPanel/gallery/bookingsGallery02.png"),n.media.getMediaUrl("wixBookings/appMenuPanel/gallery/bookingsGallery03.png")]},getButtonLabel:function(){return this.isAppInstalled()?"SiteApp_WixBookings_TemplateFTUE_Step1_NextButton_Caption":"SiteApp_WixBookings_PromotionalFTUE_Step1_NextButton_Caption"},render:o})}),define("wixBookings/appMenu/panels/firstTimeTour/businessFlow/businessStep1.rt",["react","lodash","superAppMenuInfra","wixBookings/common/dataProvider"],function(e,n,t,i){"use strict";return function(){return e.createElement(t.firstTimeTourPanels.installAppSlide,n.assign({},{installApp:this.installApp,nextSlide:this.openBackOffice,origin:"businessPanel",appWasManuallyInstalled:this.props.appWasManuallyInstalled,superAppPanelName:i.superAppPanelName,superAppButtonLabel:i.superAppButtonLabel,superAppPanelClassName:i.superAppPanelClassName,superAppSymbolName:i.superAppSymbolName,title:"SiteApp_WixBookings_BusinessFTUE_Step1_Title",subTitle:"SiteApp_WixBookings_BusinessFTUE_Step1_SubTitle",pros:["SiteApp_WixBookings_BusinessFTUE_Step1_Bullet1","SiteApp_WixBookings_BusinessFTUE_Step1_Bullet2","SiteApp_WixBookings_BusinessFTUE_Step1_Bullet3"],nextButtonLabel:this.getButtonLabel(),openAppMarketLabel:"SiteApp_Blog_PromotionalFTUE_Step1_SeeInAppMarket_LinkCaption",openAppMarket:this.openHelp,loadingLabel:"SiteApp_WixBookings_PromotionalFTUE_Step2_Loader_Caption",sliderImages:this.getSliderImages(),installImage:"bookingsInstallBtnPromotional"},this.filteredProps()))}}),define("wixBookings/appMenu/panels/firstTimeTour/businessFlow/businessStep1",["create-react-class","util","wixBookings/common/editorActionsService","wixBookings/common/sitePrefsService","wixBookings/appMenu/panels/firstTimeTour/businessFlow/businessStep1.rt","prop-types"],function(e,n,t,i,o,s){"use strict";return e({displayName:"businessStep1Bookings",propTypes:{nextSlide:s.func},mixins:[n.propTypesFilterMixin],componentDidMount:function(){t.isAppInstalled()&&!t.isAppProvisioned()&&t.goToContainingPage(),this.props.nextSlide&&this.props.appWasManuallyInstalled&&(this.props.nextSlide(),t.manuallyManageBookings(i.BOOKINGS_BO_PAGES.offeringList))},isAppInstalled:function(){return t.isAppInstalled()},installApp:function(e){t.isAppInstalled()||t.addAppToSite(),t.sendBookingsGetStartedBI(),e()},openBackOffice:function(){t.manuallyManageBookings(i.BOOKINGS_BO_PAGES.offeringList),this.props.nextSlide()},openHelp:function(){t.openHelp()},getSliderImages:function(){return[n.media.getMediaUrl("wixBookings/appMenuPanel/gallery/bookingsGallery01.png"),n.media.getMediaUrl("wixBookings/appMenuPanel/gallery/bookingsGallery02.png"),n.media.getMediaUrl("wixBookings/appMenuPanel/gallery/bookingsGallery03.png")]},getButtonLabel:function(){return this.isAppInstalled()?"SiteApp_WixBookings_TemplateFTUE_Step1_NextButton_Caption":"SiteApp_WixBookings_PromotionalFTUE_Step1_NextButton_Caption"},render:o})}),define("wixBookings/appMenu/panels/firstTimeTour/photographyFlow/photographyStep1.rt",["react","lodash","superAppMenuInfra","wixBookings/common/dataProvider"],function(e,n,t,i){"use strict";return function(){return e.createElement(t.firstTimeTourPanels.installAppSlide,n.assign({},{installApp:this.installApp,nextSlide:this.openBackOffice,origin:"photographyPanel",appWasManuallyInstalled:this.props.appWasManuallyInstalled,superAppPanelName:i.superAppPanelName,superAppButtonLabel:i.superAppButtonLabel,superAppPanelClassName:i.superAppPanelClassName,superAppSymbolName:i.superAppSymbolName,title:"SiteApp_WixBookings_PhotographyFTUE_Step1_Title",subTitle:"SiteApp_WixBookings_PhotographyFTUE_Step1_SubTitle",pros:["SiteApp_WixBookings_PhotographyFTUE_Step1_Bullet1","SiteApp_WixBookings_PhotographyFTUE_Step1_Bullet2","SiteApp_WixBookings_PhotographyFTUE_Step1_Bullet3"],nextButtonLabel:this.getButtonLabel(),openAppMarketLabel:"SiteApp_Blog_PromotionalFTUE_Step1_SeeInAppMarket_LinkCaption",openAppMarket:this.openHelp,loadingLabel:"SiteApp_WixBookings_PromotionalFTUE_Step2_Loader_Caption",sliderImages:this.getSliderImages(),installImage:"bookingsInstallBtnPromotional"},this.filteredProps()))}}),define("wixBookings/appMenu/panels/firstTimeTour/photographyFlow/photographyStep1",["core","create-react-class","util","wixBookings/common/editorActionsService","wixBookings/common/sitePrefsService","wixBookings/appMenu/panels/firstTimeTour/photographyFlow/photographyStep1.rt","prop-types"],function(e,n,t,i,o,s,a){"use strict";return n({displayName:"photographyStep1Bookings",propTypes:{nextSlide:a.func},mixins:[t.propTypesFilterMixin,e.mixins.editorAPIMixin],componentDidMount:function(){i.isAppInstalled()&&!i.isAppProvisioned()&&i.goToContainingPage(),this.props.nextSlide&&this.props.appWasManuallyInstalled&&(this.props.nextSlide(),i.manuallyManageBookings(o.BOOKINGS_BO_PAGES.offeringList))},isAppInstalled:function(){return i.isAppInstalled()},installApp:function(e){i.isAppInstalled()||i.addAppToSite(),i.sendBookingsGetStartedBI(),e()},openBackOffice:function(){i.manuallyManageBookings(o.BOOKINGS_BO_PAGES.offeringList),this.props.nextSlide()},openHelp:function(){i.openHelp()},getSliderImages:function(){return[t.media.getMediaUrl("wixBookings/appMenuPanel/gallery/bookingsGallery01.png"),t.media.getMediaUrl("wixBookings/appMenuPanel/gallery/bookingsGallery02.png"),t.media.getMediaUrl("wixBookings/appMenuPanel/gallery/bookingsGallery03.png")]},getButtonLabel:function(){return this.isAppInstalled()?"SiteApp_WixBookings_TemplateFTUE_Step1_NextButton_Caption":"SiteApp_WixBookings_PromotionalFTUE_Step1_NextButton_Caption"},render:s})}),define("wixBookings/appMenu/panels/manageBookings/manageBookingsPanel.rt",["react","lodash","util","baseUI","baseUILib","santa-editor-symbols"],function(e,n,t,i,o,s){"use strict";return function(){return e.createElement("div",{className:"wix-bookings-manage-panel"},this.displayImprovePanel()?null:e.createElement(o.CustomScroll,{heightRelativeToParent:"100%",key:"legacyPanel"},e.createElement("div",{className:"manage-bookings"}),e.createElement("p",{className:"manage-panel-description"},e.createElement("span",{},t.translate("SiteApp_WixBookings_Manage_Instructor"))),e.createElement("div",{className:"buttons-container"},e.createElement("div",{},e.createElement(i.button,{className:"btn-confirm-primary manage-btn",label:this.getOpenBackofficeLabel(),onClick:function(){this.openBookingsManager()}.bind(this)})))),this.displayImprovePanel()?e.createElement("div",{key:"newPanel"},this.displaySetupSection()?e.createElement("div",{key:"setup",className:"wix-bookings-manage-panel-setup"},e.createElement("div",{className:"wix-bookings-manage-panel-setup-title"},e.createElement(o.TextLabel,{enableEllipsis:!1,type:"T03",value:this.getSetupTitle()})),e.createElement("div",{className:"wix-bookings-manage-panel-setup-description"},e.createElement(o.TextLabel,{enableEllipsis:!1,type:"T02",value:this.getSetupDescription()})),e.createElement("div",{className:"wix-bookings-manage-panel-setup-label"},e.createElement(i.button,{className:"btn-md wix-bookings-manage-panel-setup-button",label:this.getSetupLabel(),onClick:function(){this.setupAction()}.bind(this)}),this.displaySkipAction()?e.createElement(o.Composites.ButtonMedium,{key:"skipAction",className:"wix-bookings-manage-panel-skip-button-composite"},e.createElement(o.Button,{className:"btn-text wix-bookings-manage-panel-skip-button",onClick:function(e){this.skipAction()}.bind(this)},"\n                        ",t.translate(this.skipLabel()),"\n                    ")):null)):null,e.createElement(o.SectionDivider,{},t.translate("SiteApp_WixBookings_Bookings_Services")),e.createElement(o.Divider,{long:!0}),e.createElement("div",{className:"wix-bookings-manage-panel-list-item",onClick:function(){this.openBookingsManager("manage-services")}.bind(this)},e.createElement("div",{className:"wix-bookings-manage-panel-list-item-symbol"},e.createElement("div",{className:"wix-bookings-manage-panel-list-item-symbol-wrapper"},e.createElement(s.symbol,{name:"wixBookingsServices"}))),e.createElement(o.DrillInListItem,{automationId:"wixBookingsServices",label:"SiteApp_WixBookings_Manage_Bookings_Services"})),e.createElement("div",{className:"wix-bookings-manage-panel-list-item",onClick:function(){this.openBookingsServiceForm()}.bind(this)},e.createElement("div",{className:"wix-bookings-manage-panel-list-item-symbol"},e.createElement("div",{className:"wix-bookings-manage-panel-list-item-symbol-wrapper"},e.createElement(s.symbol,{name:"wixBookingsCreate"}))),e.createElement(o.DrillInListItem,{automationId:"wixBookingsCreate",label:"SiteApp_WixBookings_Create_Service"})),e.createElement(o.SectionDivider,{},t.translate("SiteApp_WixBookings_Manage_Schedule")),e.createElement(o.Divider,{long:!0}),e.createElement("div",{className:"wix-bookings-manage-panel-list-item",onClick:function(){this.openBookingsCalendar()}.bind(this)},e.createElement("div",{className:"wix-bookings-manage-panel-list-item-symbol"},e.createElement("div",{className:"wix-bookings-manage-panel-list-item-symbol-wrapper"},e.createElement(s.symbol,{name:"wixBookingsCalendar"}))),e.createElement(o.DrillInListItem,{automationId:"wixBookingsCalendar",label:"SiteApp_WixBookings_Open_Bookings_Calendar"})),e.createElement("div",{className:"wix-bookings-manage-panel-footer"},e.createElement(o.TextLabel,{type:"T02",enableEllipsis:!1,value:"SiteApp_WixBookings_Find_More_Options"}),e.createElement(o.Composites.ButtonMedium,{},e.createElement(o.Button,{className:"btn-text",onClick:function(e){e.preventDefault(),this.openBookingsSettings()}.bind(this)},"\n                    ",t.translate("SiteApp_WixBookings_Bookings_Settings"),"\n                ")))):null)}}),define("wixBookings/appMenu/panels/manageBookings/manageBookingsPanel",["create-react-class","lodash","util","experiment","wixBookings/common/editorActionsService","wixBookings/common/sitePrefsService","wixBookings/appMenu/panels/manageBookings/manageBookingsPanel.rt"],function(e,n,t,i,o,s,a){"use strict";return e({displayName:"manageBookingsPanel",mixins:[t.propTypesFilterMixin],componentWillMount:function(){this.setState({ignorePaymentStep:s.ignorePaymentStep()})},openBookingsManager:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";i.isOpen("se_wixBooking_bizMgrImprovement")?o.manageBookings(s.BOOKINGS_BO_PAGES.offeringList):o.manageBookings("",e)},openBookingsCalendar:function(){o.manageBookings(s.BOOKINGS_BO_PAGES.calendar,"calendar")},openBookingsServiceForm:function(){o.manageBookings(s.BOOKINGS_BO_PAGES.newForm,"new-service")},getOpenBackofficeLabel:function(){return i.isOpen("se_wixBooking_bizMgrImprovement")?"SiteApp_WixBookings_Manage_Services":"SiteApp_WixBookings_Manage_OpenBackOffice"},displayImprovePanel:function(){return o.isImproveManagerPanelEnabled()},openBookingsSettings:function(){o.manageBookings(s.BOOKINGS_BO_PAGES.settings,"settings")},displaySetupSection:function(){return s.getBookingsSetupStep()===s.SETUP_STEPS.workingHours||s.getBookingsSetupStep()===s.SETUP_STEPS.email||s.getBookingsSetupStep()===s.SETUP_STEPS.payment&&!this.state.ignorePaymentStep},getSetupTitle:function(){return s.getBookingsSetupStep()===s.SETUP_STEPS.workingHours?"SiteApp_WixBookings_Setup_Working_Hours_Title":s.getBookingsSetupStep()===s.SETUP_STEPS.email?"SiteApp_WixBookings_Setup_Email_Title":s.getBookingsSetupStep()===s.SETUP_STEPS.payment?"SiteApp_WixBookings_Setup_Payment_Title":void 0},getSetupDescription:function(){return s.getBookingsSetupStep()===s.SETUP_STEPS.workingHours?"SiteApp_WixBookings_Setup_Working_Hours_Description":s.getBookingsSetupStep()===s.SETUP_STEPS.email?"SiteApp_WixBookings_Setup_Email_Description":s.getBookingsSetupStep()===s.SETUP_STEPS.payment?"SiteApp_WixBookings_Setup_Payment_Description":void 0},getSetupLabel:function(){return s.getBookingsSetupStep()===s.SETUP_STEPS.workingHours?"SiteApp_WixBookings_Setup_Working_Hours_Label":s.getBookingsSetupStep()===s.SETUP_STEPS.email?"SiteApp_WixBookings_Setup_Email_Label":s.getBookingsSetupStep()===s.SETUP_STEPS.payment?"SiteApp_WixBookings_Setup_Payment_Label":void 0},setupAction:function(){s.getBookingsSetupStep()===s.SETUP_STEPS.workingHours?o.manageBookings(s.BOOKINGS_BO_PAGES.availability,"setupwidget_availability"):s.getBookingsSetupStep()===s.SETUP_STEPS.email?o.manageBookings(s.BOOKINGS_BO_PAGES.email,"setupwidget_email"):s.getBookingsSetupStep()===s.SETUP_STEPS.payment&&o.manageBookings(s.BOOKINGS_BO_PAGES.payment,"setupwidget_payment")},displaySkipAction:function(){return s.getBookingsSetupStep()===s.SETUP_STEPS.payment&&!this.state.ignorePaymentStep},skipAction:function(){var e=this;s.getBookingsSetupStep()===s.SETUP_STEPS.payment&&o.setIgnorePayment(!0).then(function(){s.setIgnorePaymentStep(),e.setState({ignorePaymentStep:s.ignorePaymentStep()})}).catch(n.noop)},skipLabel:function(){return"SiteApp_WixBookings_Setup_Not_Now"},render:a})}),define("wixBookings/addPanel/serviceWidget",["wixBookings/common/editorActionsService","addPanelDataConsts"],function(e,n){"use strict";var t=n;return{type:t.SECTIONS_TYPES.PRESET,hide:!1,title:"SiteApp_WixBookings_AddElement_Service",showSectionHeader:!0,additionalBehaviours:{labelMode:t.LABEL_BEHAVIOUR.ALWAYS,infoIcon:t.INFO_ICON_BEHAVIOUR.NONE,hoverImageAction:t.HOVER_IMAGE_ACTIONS.NONE,scaleProportion:t.DEFAULT_SCALE_FOR_PRESET,iconEnabledForComps:[]},props:{image:"wixBookings/addPanel/service_widget.png",imageHover:null,onDrop:e.onWidgetDrop,onClick:e.onWidgetClick,items:[{id:"Wix_Bookings_Service_Widget1",structure:{type:"Component",skin:"wysiwyg.viewer.skins.TPAWidgetSkin",layout:{width:850,height:360,scale:1,rotationInDegrees:0,fixedPosition:!1},componentType:"wysiwyg.viewer.components.tpapps.TPAWidget",data:{type:"TPAWidget",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},applicationId:"2269",tpaData:{type:"TPAData",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},content:'"{"buttonStyle":"border"}"'},widgetId:"14756c3d-f10a-45fc-4df1-808f22aabe80"},style:{type:"TopLevelStyle",metaData:{isPreset:!1,schemaVersion:"1.0",isHidden:!1},style:{properties:{},propertiesSource:{},groups:{}},componentClassName:"wysiwyg.viewer.components.tpapps.TPAWidget",pageId:"",compId:"",styleType:"custom",skin:"wysiwyg.viewer.skins.TPAWidgetSkin"},mobileStructure:{layout:{width:280,height:583,x:20,y:10,scale:1,rotationInDegrees:0,fixedPosition:!1},isCustomPreset:!0}},preset:{rect:{width:324,height:164,x:0,y:0},label:"",tags:null}}],compTypes:["wysiwyg.viewer.components.tpapps.TPAWidget"]},help:{hide:!1,text:"SiteApp_WixBookings_AddElement_Info"}}}),define("wixBookings/addPanel/wixBookingsAddPanelSections",["wixBookings/addPanel/serviceWidget","tpa","wixBookings/common/editorActionsService"],function(e,n,t){"use strict";return function(){return t.isImproveManagerPanelEnabled()?[e,n.superApps.relatedApps.getRelatedAppsForPostInstall(n.superApps.relatedApps.constants.bookings.category,n.superApps.relatedApps.constants.bookings.categoryNum.post)]:[e]}}),define("wixBookings/appMenu/superApp",["util","wixBookings/common/dataProvider","wixBookings/common/editorActionsService","wixBookings/appMenu/panels/firstTimeTour/promotionalFlow/promotionalStep1","wixBookings/appMenu/panels/firstTimeTour/templateFlow/templateStep1","wixBookings/appMenu/panels/firstTimeTour/beautyWellnessFlow/beautyWellnessStep1","wixBookings/appMenu/panels/firstTimeTour/businessFlow/businessStep1","wixBookings/appMenu/panels/firstTimeTour/photographyFlow/photographyStep1","wixBookings/appMenu/panels/manageBookings/manageBookingsPanel","wixBookings/addPanel/wixBookingsAddPanelSections","wixBookings/common/sitePrefsService","lodash"],function(t,a,p,r,e,l,g,u,n,i,d,o){"use strict";var c="";c={id:a.superAppId,appDefId:a.getAppDefID(),appName:"WixBookings",firstTimeTour:{templateFlow:[e],manuallyInstalledFlow:[e],promotionalFlow:[r]},panel:{name:"wixBookings.panels.bookingsPanel",manage:{title:"SiteApp_WixBookings_Menu_ManageBookings",helpId:"bf44fdcd-7f35-41a2-a04a-93a0a821e55d",template:n},pages:{isHidden:!0},addElements:{title:p.isImproveManagerPanelEnabled()?"SiteApp_WixBookings_Improvements_AddElement_Title":"SiteApp_WixBookings_AddElement_Title",helpId:"fb8a363d-c55d-4a8e-bd0b-cb7d5bcb85d5",sections:i,categoryId:a.getAddElementCategoryId()},learnMore:{title:"SiteApp_WixBookings_Learn_Title",section2HeaderViewA:"SiteApp_WixBookings_Learn_Forum",section3HeaderViewA:"SiteApp_WixBookings_Learn_Blog",data:{viewA:{helpCenterPopUp:{isHidden:!0},supportForumsPopUp:{link:"https://support.wix.com/en/wix-bookings/setting-up-wix-bookings/?locale={{lang}}",image:t.media.getMediaUrl("superAppMenuInfra/ViewTheBlogHelpCenter.png")},wixTipsBlog:{link:"http://www.wix.com/blog/tag/wix-bookings/",image:t.media.getMediaUrl("superAppMenuInfra/OpenTheBlogSupportForum.png")}}}}},openAppPremiumPackagePicker:function(){p.handelUpgrade()},isAppInstalled:p.isAppInstalled};var m=function(){var e=t.languages.getLanguageCode(),n=o.get(c,"panel.learnMore.data.viewA.supportForumsPopUp.link");c.panel.learnMore.data.viewA.supportForumsPopUp.link=n.replace("{{lang}}",e)};return{getWixBookingsSuperApp:function(e,n,t){p.isImproveManagerPanelEnabled()&&(c.firstTimeTour={templateFlow:[r],manuallyInstalledFlow:[r],promotionalFlow:[r]},t.isOpen("se_wixBooking_marketingStateContentByPostReg")&&("beauty-wellness"===d.getPostReg()?c.firstTimeTour={templateFlow:[l],manuallyInstalledFlow:[l],promotionalFlow:[l]}:"business"===d.getPostReg()?c.firstTimeTour={templateFlow:[g],manuallyInstalledFlow:[g],promotionalFlow:[g]}:"photography"===d.getPostReg()&&(c.firstTimeTour={templateFlow:[u],manuallyInstalledFlow:[u],promotionalFlow:[u]})));var i=void 0,o=void 0,s=void 0;return s=t.isOpen("se_wixBooking_businessPlan_Terminology")?p.isImproveManagerPanelEnabled()?(i="SiteApp_WixBookings_BusinessPlan_Improvements_Upgrade_link",o="SiteApp_WixBookings_BusinessPlan_Improvements_UpgradeTooltip_Title","SiteApp_WixBookings_BusinessPlan_Improvements_UpgradeTooltip_Paragraph1"):(i="SiteApp_WixBookings_BusinessPlan_Upgrade_link",o="SiteApp_WixBookings_BusinessPlan_UpgradeTooltip_Title","SiteApp_WixBookings_BusinessPlan_UpgradeTooltip_Paragraph1"):p.isImproveManagerPanelEnabled()?(i="SiteApp_WixBooking_Improvements_Upgrade_link",o="SiteApp_WixBookings_Improvements_UpgradeTooltip_Title","SiteApp_WixBookings_Improvements_UpgradeTooltip_Paragraph1"):(i="SiteApp_WixBooking_Upgrade_link",o="SiteApp_WixBookings_UpgradeTooltip_Title","SiteApp_WixBookings_UpgradeTooltip_Paragraph1"),c.hasPremiumPlan=e,c.upgradeLinkText=i,c.tooltip={upgrade:{title:o,text:s,label:"SiteApp_WixBookings_UpgradeTooltip_Button_Label",image:"menubarUpgradePromotionDark"}},c.isPremium=function(e){return a.hasPremium(e)},m(),c}}}),define("wixBookings/appMenu/bookingsPanel.rt",["react","lodash","superAppMenuInfra","wixBookings/common/dataProvider","wixBookings/appMenu/superApp"],function(e,n,t,i,o){"use strict";return function(){return e.createElement(t.superAppPanel,n.assign({},{superApp:this.getSuperApp(),selectedTabName:this.props.selectedTabName,fullPanel:this.getFullPanelData(),panelClass:i.superAppPanelClassName},this.filteredProps()))}}),define("wixBookings/appMenu/bookingsPanel",["create-react-class","core","lodash","util","experiment","wixBookings/appMenu/superApp","wixBookings/appMenu/bookingsPanel.rt","wixBookings/common/sitePrefsService","wixBookings/common/editorActionsService"],function(e,n,t,i,o,s,a,p,r){"use strict";return e({displayName:"BookingsPanel",mixins:[i.propTypesFilterMixin,n.mixins.editorAPIMixin],componentDidMount:function(){if(o.isOpen("se_wixBooking_6thButtonImprovementsFT")){i.fedopsLogger.interactionEnded(i.fedopsLogger.INTERACTIONS.BOOKINGS_PANEL_OPENED),o.isOpen("se_wixBooking_improveManagerPanel")&&window.FS&&window.FS.setUserVars({bookingsPanel_bool:!0});try{r.sendBookingsPanelOpenedBI()}catch(e){i.ravenUtils.captureError(e,{tags:{bookingsPanelOpenBI:!0}})}}},getSuperApp:function(){var e=this.getEditorAPI(),n=this.getEditorAPI().account.isUserOwner();return o.isOpen("se_wixBooking_6thButtonImprovementsFT")&&i.fedopsLogger.interactionStarted(i.fedopsLogger.INTERACTIONS.BOOKINGS_PANEL_OPENED),s.getWixBookingsSuperApp(n,e,o)},getFullPanel:function(){return r.isImproveManagerPanelEnabled()&&(p.createServiceStep()||p.editServiceStep())},getFullPanelData:function(){return this.getFullPanel()?{symbol:"wixBookingsCreateFirstService",onClick:this.openBackOffice,description:p.editServiceStep()?"SiteApp_WixBookings_EditFirstService_Description":"SiteApp_WixBookings_CreateFirstService_Description",title:p.editServiceStep()?"SiteApp_WixBookings_EditFirstService_Title":"SiteApp_WixBookings_CreateFirstService_Title",buttonLabel:p.editServiceStep()?"SiteApp_WixBookings_EditFirstService_Label":"SiteApp_WixBookings_CreateFirstService_Label"}:null},openBackOffice:function(){r.manageBookings(p.BOOKINGS_BO_PAGES.offeringList),r.sendBookingsCreateNewServiceBI()},render:a})}),define("wixBookings",["tpa","stateManagement","constants","experiment","wixBookings/appMenu/bookingsPanel","wixBookings/common/dataProvider","wixBookings/common/editorActionsService","wixBookings/common/bi/wixBookingsEvents"],function(p,r,l,g,e,u,d,c){"use strict";return{onPreviewReady:function(n){var t=u.superAppPanelName,i=u.superAppButtonLabel,o=u.superAppSymbolName,s=u.superAppPanelClassName;if(n.documentServices&&(d.init(n),d.registerButtonIfRequired(),c.registerEvents(n),p.superApps.registerOnAppInstalled(u.getAppDefID(),d.onAppInstalled),p.superApps.registerOnAppDeleted(u.getAppDefID(),d.onAppDeleted),g.isOpen("se_wixBooking_6thButtonImprovementsFT"))){var e=n.store.getState(),a=r.editorPlugins.userPreferences.selectors.getSiteUserPreferences(t+l.LEFT_BAR.WAS_BUTTON_CLICKED_KEY)(e);n.savePublish.registerFirstSaveCallback(function(){if(d.shouldExpandButton("saveClick")){var e=d.isAppInstalled();n.store.dispatch(r.editorPlugins.leftBar.actions.addSuperAppsButton(t,{},i,s,o,!1,!0,e))}}),d.isExapndPanelButtonEnabled()&&!a&&n.registerSitePublishedCallbacks(function(){n.store.dispatch(r.editorPlugins.leftBar.actions.collapseButton(t))})}},panels:{bookingsPanel:e}}});
//# sourceMappingURL=wixBookings.min.js.map