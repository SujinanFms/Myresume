define("customizeDesignDataPanel/ui/designDataPanelComponent.rt",["react","lodash","baseUI","baseUILib"],function(s,o,i,r){"use strict";return function(){function n(e,t){var a=i[e.controlType];return s.createElement("div",{key:e.key},function(e,t,a){var n=this.getValueLink(e.key);return s.createElement(a,o.assign({},{value:n.value,valueLink:n,disabled:this.isCategoryDisabled()},this.getRequiredProps(e)))}.apply(this,[e,t,a]),this.isLastControlInCategory(t)?null:s.createElement(r.Divider,{long:!1,key:"divider"}))}return s.createElement("div",{className:"design-data-panel flex-column",style:{height:this.getHeight()}},s.createElement("div",{className:"design-data-panel-body flex-column flex-child"},s.createElement("div",{className:"content-container flex-child",key:"paramEditBox"},s.createElement(i.verticalTabs,{valueLink:this.linkSelectedCategory(),tabClicked:this.categoryChanged,options:this.getCategoriesRadioValues(),closed:this.state.controlsClosed}),this.state.controlsClosed?null:s.createElement("div",{className:"content "+this.getCategoryClassName(),key:"content"},s.createElement(r.CustomScroll,{heightRelativeToParent:"100%"},s.createElement("div",{className:"scrolled-content"},s.createElement("span",{className:"tab-text"},this.getSelectedCategoryTranslatedText()),s.createElement.apply(this,["div",{className:"section"},this.isCategoryTogglable()?s.createElement("div",{key:"categoryToggle"},s.createElement(r.Composites.ToggleSwitch,{},s.createElement(r.ToggleSwitch,{value:this.isCategoryEnabled(),label:this.getCategoryToggleLable(),onChange:this.toggleCategory})),s.createElement(r.Divider,{long:!1,key:"divider"})):null,!this.isCategoryTogglable()||this.isCategoryEnabled()?o.map(this.getSelectedCategoryControls(),function(e,t,a){return n.apply(this,[e,t])}.bind(this)):null])))))))}}),define("customizeDesignDataPanel/lib/controls",["lodash"],function(l){"use strict";var s=void 0,o=["top","right","bottom","left"],r=["topLeft","topRight","bottomRight","bottomLeft"],e=Object.freeze({cssBoxShadow:[{controlType:"angle",key:"angle",props:{helpText:null,label:"CustomDesign_Shadow_Angle",shouldTranslate:!0,step:1}},{controlType:"slider",key:"distance",props:{helpText:null,label:"CustomDesign_Shadow_Distance",shouldTranslate:!0,min:0,max:50}},{controlType:"slider",key:"size",props:{helpText:null,label:"CustomDesign_Shadow_Size",shouldTranslate:!0,min:0,max:50}},{controlType:"slider",key:"blur",props:{helpText:null,label:"CustomDesign_Shadow_Blur",shouldTranslate:!0,min:0,max:50}},{controlType:"colorPickerInputWithOpacity",key:"color",props:{helpText:null,label:"CustomDesign_Shadow_Color&Opacity",shouldTranslate:!0,min:0,max:50}}],cssBorderRadius:[{controlType:"cornerRadiusInput",key:"radius",props:{helpText:null,label:"CustomDesign_Corners_CornerRadius"}}],cssBorder:[{controlType:"colorPickerInputWithOpacity",key:"color",props:{helpText:null,label:"CustomDesign_Borders_Color&Opacity"}},{controlType:"slider",key:"width",props:{helpText:null,label:"CustomDesign_Borders_Width",max:15,min:0}}]}),t=Object.freeze({cssBoxShadow:{angle:{getLinkableValue:function(t,e){var a=l.get(t.cssStyle,e[0])[0];return function(){var e=u(t);return c(a.offsetX.value,a.offsetY.value,e)}},linkedValueToData:function(s){return function(e){var t=s.cssStyle.cssBoxShadow[0],a=i(t.offsetX.value,t.offsetY.value),n=l.cloneDeep(s);return l.assign(n.cssStyle.cssBoxShadow[0],g(e,a)),l.assign(n.panelExtensions.cssBoxShadow[0],{angle:e}),n}}},distance:{getLinkableValue:function(e,t){var a=l.get(e.cssStyle,t[0])[0];return function(){return i(a.offsetX.value,a.offsetY.value)}},linkedValueToData:function(o){return function(e){var t=o.cssStyle.cssBoxShadow[0],a=l.cloneDeep(o),n=u(o),s=c(t.offsetX.value,t.offsetY.value,n);return l.assign(a.cssStyle.cssBoxShadow[0],g(s,e)),l.assign(a.panelExtensions.cssBoxShadow[0],{angle:s}),a}}},size:{getLinkableValue:function(e,t){var a=l.get(e.cssStyle,t[0])[0];return function(){return a.spreadRadius.value}},linkedValueToData:function(a){return function(e){var t=l.cloneDeep(a);return t.cssStyle.cssBoxShadow[0].spreadRadius=f(e),t}}},blur:{getLinkableValue:function(e,t){var a=l.get(e.cssStyle,t[0])[0];return function(){return a.blurRadius.value}},linkedValueToData:function(a){return function(e){var t=l.cloneDeep(a);return t.cssStyle.cssBoxShadow[0].blurRadius=f(e),t}}},color:{getLinkableValue:function(e,t){var a=l.get(e.cssStyle,t[0])[0][t[1]];return function(){return{color:d(a),alpha:a.alpha.toFixed(4)}}},linkedValueToData:function(s,o){return function(e){var t=l.cloneDeep(s),a=l.clone(o);a.splice(1,0,"0");var n=l.bind(h,{},t.themeMappings);return p(n,t.cssStyle,e,a),t}}}},cssBorderRadius:{radius:{getLinkableValue:function(e,t){var n=l.get(e.cssStyle,t[0]);return function(){return l.reduce(r,function(e,t,a){return e+n[t].value+(a!==r.length-1?" ":"")},"")}},linkedValueToData:function(o,i){return function(e){var t=l.cloneDeep(o),a=e.split(" ");if(1===a.length){var n=a[0];a=[n,n,n,n]}var s=t.cssStyle[i[0]]={};return l.forEach(r,function(e,t){s[e]=f(parseInt(a[t],10))}),t}}}},cssBorder:{color:{getLinkableValue:function(e,t){var a=l.get(e.cssStyle,t);return function(){return{color:d(a.top),alpha:a.top.alpha.toFixed(4)}}},linkedValueToData:function(e,s){return function(t){var a=l.cloneDeep(e),n=l.bind(h,{},a.themeMappings);return l.forEach(o,function(e){p(n,a.cssStyle,t,s.concat(e))}),a}}},width:{getLinkableValue:function(e,t){var a=l.get(e.cssStyle,t);return function(){return a.top.value}},linkedValueToData:function(e,n){return function(t){var a=l.cloneDeep(e);return l.forEach(o,function(e){l.set(a.cssStyle,n.concat(e),f(t))}),a}}}}});function n(e){return Math.round(100*e)/100}function i(e,t){if(0===e||0===t)return e+t;var a=Math.atan2(e,t);return n(e/Math.sin(a))}function u(e){return e.panelExtensions.cssBoxShadow[0].angle}function c(e,t,a){return 0===e&&0===t?a:(270+180*Math.atan2(t,e)/Math.PI)%360}function g(e,t){var a=(360-e)*Math.PI/180;return{offsetX:f(n(Math.sin(a)*t)),offsetY:f(n(Math.cos(a)*t))}}function d(e){return"#"+a(e.red)+a(e.green)+a(e.blue)}function a(e){var t=e.toString(16).toUpperCase();return t.length<2&&(t="0"+t),t}function h(e,t,a){if(/color_/.test(t)){var n=s.colors.get(t);return e[a.join(".")]=t,n}return delete e[a.join(".")],t}function p(e,t,a,n){var s,o=a.alpha,i=e(a.color,n),r=(s=i,{red:parseInt(s.substr(1,2),16),green:parseInt(s.substr(3,2),16),blue:parseInt(s.substr(5,2),16)});r.alpha=parseFloat(o),l.set(t,n,r)}function f(e){return{unit:"px",value:e}}return{setThemeAPI:function(e){s=e},categoryControlsMap:e,getDataManipulators:function(n,s,o){var e=t[s][o];return l.reduce(e,function(e,t,a){return e[a]=t(n,[s,o]),e},{})}}}),define("customizeDesignDataPanel/lib/consts",[],function(){"use strict";return{editableTypes:["cssBoxShadow","cssBorderRadius","cssBorder","themeMappings"],togglableCategories:["cssBoxShadow"],categoryToggleLabels:{cssBoxShadow:"CustomDesign_Shadow_EnableToggle"},categoryDefaults:Object.freeze({cssBoxShadow:[{inset:!1,offsetX:{unit:"px",value:0},offsetY:{unit:"px",value:1},blurRadius:{unit:"px",value:4},spreadRadius:{unit:"px",value:0},color:{red:0,green:0,blue:0,alpha:1}}],cssBorderRadius:{topLeft:{unit:"px",value:0},topRight:{unit:"px",value:0},bottomRight:{unit:"px",value:0},bottomLeft:{unit:"px",value:0}},cssBorder:{width:{top:{unit:"px",value:0},right:{unit:"px",value:0},bottom:{unit:"px",value:0},left:{unit:"px",value:0}},style:{top:"solid",left:"solid",right:"solid",bottom:"solid"},color:{top:{red:0,green:0,blue:0,alpha:1},right:{red:0,green:0,blue:0,alpha:1},bottom:{red:0,green:0,blue:0,alpha:1},left:{red:0,green:0,blue:0,alpha:1}}}}),designDataExtensionDefualts:Object.freeze({cssBoxShadow:[{angle:0}]}),HEIGHT_SMALL:"380px",HEIGHT_BIG:"453px",MIN_VIEW_PORT_HEIGHT:500}}),define("customizeDesignDataPanel/ui/designDataPanelComponent",["reactDOM","lodash","zepto","create-react-class","stateManagement","customizeDesignDataPanel/ui/designDataPanelComponent.rt","core","panelUtils","customizeDesignDataPanel/lib/controls","customizeDesignDataPanel/lib/consts","util"],function(t,o,a,e,n,s,i,r,l,u,c){"use strict";var g=n.editorPlugins.domMeasurements.selectors.getViewPort,d=[{value:"cssBorder",symbolName:"borderDesign",text:c.translate("CustomDesign_TabLabel_Borders")},{value:"cssBorderRadius",symbolName:"cornersDesign",text:c.translate("CustomDesign_TabLabel_Corners")},{value:"cssBoxShadow",symbolName:"shadowDesign",text:c.translate("CustomDesign_TabLabel_Shadow")}],h=u.designDataExtensionDefualts,p=e({displayName:"customize-design-data-panel",mixins:[i.mixins.editorAPIMixin,r.linkColorPickerMixin],getInitialState:function(){return l.setThemeAPI(this.getEditorAPI().theme),{editableDesignData:this.getEditableData(),selectedCategory:this.props.selectedCategory,controlsClosed:!this.props.selectedCategory}},componentWillMount:function(){var e=this.getEditorAPI().dsActions.theme.events.onChange.addListener(function(){this.updateEditableDataState()}.bind(this));this.setState({themeChangeListenerId:e}),this.initCategoriesTogglableState()},componentWillReceiveProps:function(){this.updateDesignOnModeChange()},componentWillUnmount:function(){this.getEditorAPI().theme.events.onChange.removeListener(this.state.themeChangeListenerId)},updateDesignOnModeChange:function(){var e=this.props.selectedComponent[0],t=this.getEditorAPI().components.modes.getComponentActiveModeIds(e);o.isEqual(this.state.compModes,t)||(this.setState({compModes:t}),this.initCategoriesTogglableState(),this.updateEditableDataState())},updateEditableDataState:function(){this.setState({editableDesignData:this.getEditableData()})},initCategoriesTogglableState:function(){var a=this.getDesignData(),n={disabledCategoriesData:{cssStyle:{},panelExtensions:h},categoryEnableStates:{}};o.forEach(u.togglableCategories,function(e){var t=!o.isNil(a.cssStyle[e]);(n.categoryEnableStates[e]=t)||(n.disabledCategoriesData.cssStyle[e]=o.cloneDeep(u.categoryDefaults[e]))}),this.setState(n)},getEditableData:function(){var e=this.getDesignData(),t={};return t.cssStyle=this.getComponentCssStyle(),t.themeMappings=e.themeMappings,t.panelExtensions=this.getDesignDataExtensions(),t},getComponentCssStyle:function(){var a=this.getDesignData(),n={},s=this.isCategoryTogglable,e=o.difference(u.editableTypes,this.props.disabledCategories);return o.forEach(e,function(e){var t=a.cssStyle[e];s(e)||t?n[e]=t:n[e]=u.categoryDefaults[e]}),n},getDesignDataExtensions:function(){return this.state&&this.state.designDataExtensions?this.state.designDataExtensions:h},getDataManipulators:function(e){var t=this.state.selectedCategory,a=void 0;return a=this.isCategoryDisabled()?this.state.disabledCategoriesData:this.state.editableDesignData,l.getDataManipulators(a,t,e)},updateComponentDesignData:function(e){this.getEditorAPI().components.design.update(this.props.selectedComponent,e)},updateDesignDataExtension:function(e){this.setState({designDataExtensions:e})},getValueLink:function(e){var a=this.getDataManipulators(e);return{value:a.getLinkableValue(),requestChange:function(e){var t=a.linkedValueToData(e);this.setState({editableDesignData:t}),this.updateComponentDesignData(t),this.updateDesignDataExtension(t.panelExtensions)}.bind(this)}},getRequiredProps:function(e){var t=o.clone(e.props);return"colorPickerInputWithOpacity"===e.controlType&&o.assign(t,{openColorPicker:this.openColorPicker,colorResolver:this.resolveColor,isSmallStepper:!0}),t},linkSelectedCategory:function(){return{value:this.state.selectedCategory,requestChange:function(e){this.state.selectedCategory!==e&&this.setState({selectedCategory:e,controlsClosed:!1})}.bind(this)}},getCategoriesRadioValues:function(){var a=o.keys(this.state.editableDesignData.cssStyle);return o.reduce(d,function(e,t){return o.includes(a,t.value)&&e.push(t),e},[])},getHeight:function(){var e=this.getEditorAPI();return g(e.store.getState()).height<u.MIN_VIEW_PORT_HEIGHT?u.HEIGHT_SMALL:u.HEIGHT_BIG},getDesignData:function(){return this.getEditorAPI().components.design.get(this.props.selectedComponent)},categoryChanged:function(){this.scrollContainerToTop()},scrollContainerToTop:function(){var e=t.findDOMNode(this);a(e).find(".inner-container").scrollTop(0)},getCategoryClassName:function(){return"category-"+this.state.selectedCategory},getSelectedCategoryTranslatedText:function(){var e=this.state.selectedCategory;return e?o.find(d,{value:e}).text:""},getSelectedCategoryControls:function(){return l.categoryControlsMap[this.state.selectedCategory]},isLastControlInCategory:function(e){return e===this.getSelectedCategoryControls().length-1},isCategoryDisabled:function(){return this.isCategoryTogglable()&&!this.isCategoryEnabled()},isCategoryTogglable:function(e){return e=e||this.state.selectedCategory,o.includes(u.togglableCategories,e)},getCategoryToggleLable:function(){return u.categoryToggleLabels[this.state.selectedCategory]},isCategoryEnabled:function(){return this.state.categoryEnableStates[this.state.selectedCategory]},toggleCategory:function(){var e={},t=this.state.selectedCategory,a=!this.isCategoryEnabled(),n=o.cloneDeep(this.state.editableDesignData);if(e.categoryEnableStates=o.cloneDeep(this.state.categoryEnableStates),a){var s=this.state.disabledCategoriesData.cssStyle[t];n.cssStyle[t]=s}else e.disabledCategoriesData=o.cloneDeep(this.state.disabledCategoriesData),e.disabledCategoriesData.cssStyle[t]=n.cssStyle[t],n.cssStyle[t]=null;e.editableDesignData=n,this.updateComponentDesignData(n),e.categoryEnableStates[this.state.selectedCategory]=a,this.setState(e)},onLoaded:o.noop,render:s});return c.hoc.connect(c.hoc.STORES.STATE_ONLY,o.constant({}),void 0,void 0,!1)(p)}),define("customizeDesignDataPanel/ui/designDataPanelStandalone.rt",["react","lodash","compPanelInfra","customizeDesignDataPanel/ui/designDataPanelComponent"],function(n,s,o,i){"use strict";return function(){return n.createElement(o.compPanelFrame,(e={className:"design-data-panel-frame",id:"customizeDesignPanel",title:"title",helpId:!0},t=this.getPanelFrameProps(),a=s.assign({},e,t),e.hasOwnProperty("style")&&(a.style=s.defaults(a.style,e.style)),e.hasOwnProperty("className")&&t.hasOwnProperty("className")&&(a.className=t.className+" "+e.className),a),n.createElement(i,this.props));var e,t,a}}),define("customizeDesignDataPanel/ui/designDataPanelStandalone",["core","create-react-class","lodash","util","helpIds","stateManagement","customizeDesignDataPanel/ui/designDataPanelStandalone.rt"],function(e,t,a,n,s,o,i){"use strict";var r=o.editorPlugins.domMeasurements.hoc.panelPosition,l=t({displayName:"designDataPanelStandalone",mixins:[e.mixins.editorAPIMixin],getPanelFrameProps:function(){var e=n.panelUtils.getFrameProps(this.props);return e.helpId=s.UTILS.getCustomizeDesignHelpId(this.props.compType),e.overrideTitle&&(e.title=e.overrideTitle,e=a.omit(e,["overrideTitle"])),e},render:i});return r()(l)}),define("customizeDesignDataPanel",["customizeDesignDataPanel/ui/designDataPanelComponent","customizeDesignDataPanel/ui/designDataPanelStandalone"],function(e,t){"use strict";return{panel:e,standalone:t}});
//# sourceMappingURL=customizeDesignDataPanel.min.js.map