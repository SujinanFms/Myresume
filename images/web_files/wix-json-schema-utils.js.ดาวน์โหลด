!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],t):"object"==typeof exports?exports["wix-json-schema-utils"]=t(require("lodash")):e["wix-json-schema-utils"]=t(e.lodash)}(this,function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(t,r){t.exports=e},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(0),i=function(e){return"#"+e.$id},u=function(e,t){return{baseDefinitions:o.keyBy(e,i),customDefinitions:o.keyBy(t,i)}};e.exports={createResolver:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=u(e,t);return{resolve:function(e){return function e(t,r){var i={};return o.forOwn(r,function(u,f){var a=Array.isArray(u);if("object"!==(void 0===u?"undefined":n(u))||a)if("allOf"===f&&a)i=e(t,o.merge.apply(o,[{}].concat(u)));else{if("$ref"===f)return t.baseDefinitions[u]?i=o.defaultsDeep({},{origin:"base"},r,t.baseDefinitions[u]):t.customDefinitions[u]&&(i=o.defaultsDeep({},{origin:"custom"},r,t.customDefinitions[u])),!1;i[f]=u}else i[f]=e(t,u);return!0}),i}(r,e)},update:function(e,t){r=u(e,t)}}}}},function(e){e.exports={text:{$id:"text",type:"string",title:"",default:"",description:""},number:{$id:"number",type:"number",title:"",default:0,description:""},boolean:{$id:"boolean",type:"boolean",title:"",default:!1,description:""},image:{$id:"image",type:"string",title:"",default:"",description:""},dateTime:{$id:"dateTime",type:"string",title:"",default:"",description:""},url:{$id:"url",type:"string",title:"",default:"",description:""},color:{$id:"color",type:"string",title:"",default:"",description:""}}},function(e,t,r){"use strict";var n=r(1).createResolver,o=r(4).pack,i=r(5).propertiesSchemaToTern,u=r(2);e.exports={createResolver:n,pack:o,baseDefinitions:u,propertiesSchemaToTern:i}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(0),i=function e(t){if("object"!==(void 0===t?"undefined":n(t))||Array.isArray(t))return t;var r=o.omit(t,["title","description","minLength","maxLength","maximum","minimum","multipleOf","type","items","$id","$ref"]);return o.forOwn(r,function(t,n){o.has(r[n],"allOf")?r[n]=e(o.merge.apply(o,[{}].concat(t.allOf))):r[n]=e(t)}),o.has(r,"default")&&1===o.keys(r).length&&(r=r.default),o.has(r,"default")&&o.has(r,"properties")&&(r=o.defaultsDeep(r.default,function e(t){return o(t).pickBy(o.isObject).mapValues(e).omitBy(o.isEmpty).assign(o.omitBy(t,o.isObject)).value()}(r.properties))),r};e.exports={pack:function e(t){var r={};return o.forOwn(t,function(u,f){var a=Array.isArray(u);"object"!==(void 0===u?"undefined":n(u))||a?r[f]=u:"default"===f?r[f]=i(t):u.$ref?r[f]=function(e){return{allOf:[{$ref:e.$ref},o.pick(e,["title","description","default","minLength","maxLength","maximum","minimum","multipleOf"])]}}(e(u)):"array"===u.type?r[f]=function(e){return{allOf:[o.pick(e,["title","description","default","type","items"])]}}(e(u)):r[f]=e(u)}),r}}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(0),i=r(1).createResolver,u=r(2),f=function(e,t){var r=t.resolve(e),n=o.head(o.keys(r));return{propName:n,propID:r[n].$id,propRef:r[n].$ref,propData:r[n]}},a=function(e,t){return o.findKey(u,["$id",e])||o.findKey(t,["$id",e])||e},s=function(e,t){return o.assign({"!doc":e.description},function e(t,r){if(o.has(t,"$ref")){var n=t.$ref.substring(1);return{"!type":"+"+a(n,r)}}if("array"===t.type){var i=e(t.items,r),u=o.head(o.keys(i));return o.isEmpty(u)||(i[u]="["+i[u]+"]"),i}return"object"===t.type?{}:{"!proto":t.type}}(e,t))};e.exports={propertiesSchemaToTern:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var p=[],c=r,l=Array.isArray(c),y=0;for(c=l?c:c[Symbol.iterator]();;){var d;if(l){if(y>=c.length)break;d=c[y++]}else{if((y=c.next()).done)break;d=y.value}var m=d;Array.isArray(m)?p=o.concat(p,m):"object"===(void 0===m?"undefined":n(m))&&(p=o.concat(p,o.reduce(m,function(e,t,r){var n;return e.push(((n={})[r]=t,n)),e},[])))}var b=i(u,e);return p.map(function(t){return function(e,t,r){var n,i=f(e,t),u=i.propName,a=((n={})[u]=s(i.propData,r),n);return o.has(i.propData,"properties")&&o.forOwn(i.propData.properties,function(e,n){var o,i=f(((o={})[n]=e,o),t);a[u][n]=s(i.propData,r)}),a}(t,b,e)}).reduce(function(e,t){return o.assign(e,t)},{})}}}])});
//# sourceMappingURL=wix-json-schema-utils.js.map